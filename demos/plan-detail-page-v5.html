<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plan Detail v5 — Expanded Queued + Parallel Branches</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --color-primary: #2e7918;
      --color-primary-light: #E8F5E3;
      --surface-neutral-white: #FFFFFF;
      --surface-neutral-xx-weak: #F5F3F2;
      --surface-neutral-x-weak: #EDEBEA;
      --border-neutral-weak: #E5E5E5;
      --border-neutral-medium: #D4D4D4;
      --text-neutral-xx-strong: #1C1917;
      --text-neutral-x-strong: #292524;
      --text-neutral-strong: #44403C;
      --text-neutral-medium: #78716C;
      --text-neutral-weak: #A8A29E;
      --color-queued: #A8A29E;
      --color-queued-light: #F5F3F2;
      --color-working: #2563EB;
      --color-working-light: #DBEAFE;
      --color-done: #059669;
      --color-done-light: #D1FAE5;
      --color-review-strong: #256314;
      --color-awaiting: #D97706;
      --color-awaiting-light: #FEF3C7;
      --color-risk-high: #DC2626;
      --color-risk-med: #D97706;
      --color-risk-low: #059669;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #F0EDEB;
      color: var(--text-neutral-x-strong);
      min-height: 100vh;
    }

    .top-nav {
      position: sticky; top: 0; z-index: 200;
      background: var(--surface-neutral-white);
      border-bottom: 1px solid var(--border-neutral-weak);
      display: flex; align-items: center; padding: 0 32px; height: 56px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    }
    .breadcrumb { display: flex; align-items: center; gap: 8px; font-size: 14px; color: var(--text-neutral-medium); }
    .breadcrumb a { color: var(--color-primary); text-decoration: none; font-weight: 500; }
    .breadcrumb .sep { color: var(--text-neutral-weak); font-size: 9px; }
    .breadcrumb .current { color: var(--text-neutral-xx-strong); font-weight: 600; }

    /* State toggle */
    .state-toggle { display: flex; justify-content: center; gap: 8px; padding: 24px 0; }
    .toggle-btn {
      padding: 8px 20px; border-radius: 99px; font-size: 13px; font-weight: 600;
      border: 1px solid var(--border-neutral-medium); background: var(--surface-neutral-white);
      color: var(--text-neutral-medium); cursor: pointer; transition: all 0.15s ease;
    }
    .toggle-btn.active { background: var(--text-neutral-xx-strong); color: white; border-color: var(--text-neutral-xx-strong); }
    .state-desc {
      text-align: center; font-size: 12px; color: var(--text-neutral-medium);
      max-width: 600px; margin: -8px auto 24px; line-height: 1.5;
    }

    .view { display: none; }
    .view.active { display: block; }

    /* Shell for artifact panel */
    .shell { display: flex; min-height: calc(100vh - 56px); }
    .findings-pane {
      flex: 1; max-width: 740px; margin: 0 auto; padding: 0 24px 80px;
      transition: max-width 0.3s ease;
    }
    .shell.panel-open .findings-pane {
      max-width: 560px; margin: 0; margin-left: max(24px, calc((100% - 560px - 420px) / 2));
    }
    .artifact-panel {
      width: 0; overflow: hidden; background: var(--surface-neutral-white);
      border-left: 1px solid var(--border-neutral-weak);
      box-shadow: -4px 0 20px rgba(0,0,0,0.06);
      transition: width 0.3s ease; position: sticky; top: 56px;
      height: calc(100vh - 56px); display: flex; flex-direction: column;
    }
    .shell.panel-open .artifact-panel { width: 420px; }

    .ap-header {
      padding: 20px 24px 16px; border-bottom: 1px solid var(--border-neutral-weak);
      display: flex; align-items: center; gap: 12px; flex-shrink: 0;
    }
    .ap-header-icon {
      width: 36px; height: 36px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0;
    }
    .ap-header-icon.chart { background: #DBEAFE; color: #2563EB; }
    .ap-header-icon.report { background: var(--color-primary-light); color: var(--color-primary); }
    .ap-header-icon.text { background: #EDE9FE; color: #7C3AED; }
    .ap-header-info { flex: 1; }
    .ap-header-title { font-size: 15px; font-weight: 600; }
    .ap-header-meta { font-size: 11px; color: var(--text-neutral-weak); margin-top: 2px; }
    .ap-close {
      width: 28px; height: 28px; border-radius: 6px;
      border: none; background: none; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      color: var(--text-neutral-medium); font-size: 14px;
    }
    .ap-close:hover { background: var(--surface-neutral-xx-weak); }
    .ap-body { flex: 1; overflow-y: auto; padding: 24px; }
    .ap-actions {
      padding: 16px 24px; border-top: 1px solid var(--border-neutral-weak);
      display: flex; gap: 8px; flex-shrink: 0;
    }

    /* Page */
    .page { max-width: 740px; margin: 0 auto; padding: 0 24px 80px; }

    .badge {
      display: inline-flex; align-items: center; gap: 4px;
      font-size: 11px; font-weight: 600; padding: 3px 10px; border-radius: 99px;
    }
    .badge-paused { background: var(--color-awaiting-light); color: var(--color-awaiting); }
    .badge-completed { background: var(--color-done-light); color: var(--color-done); }

    .btn {
      padding: 7px 14px; border-radius: 8px; font-size: 12px; font-weight: 500;
      border: none; cursor: pointer; display: inline-flex; align-items: center; gap: 5px;
    }
    .btn-outline { background: var(--surface-neutral-white); color: var(--text-neutral-strong); border: 1px solid var(--border-neutral-medium); }
    .btn-outline:hover { background: var(--surface-neutral-xx-weak); }
    .btn-amber { background: var(--color-awaiting); color: white; }
    .btn-amber:hover { background: #B45309; }
    .btn-sm { padding: 5px 10px; font-size: 11px; }

    /* Plan header */
    .plan-header {
      background: var(--surface-neutral-white); border-radius: 16px;
      border: 1px solid var(--border-neutral-weak); padding: 20px 24px;
      margin-bottom: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    }
    .ph-top { display: flex; align-items: center; gap: 14px; margin-bottom: 14px; }
    .ph-icon {
      width: 40px; height: 40px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px; flex-shrink: 0;
    }
    .ph-info { flex: 1; }
    .ph-info h1 { font-size: 18px; font-weight: 700; margin-bottom: 3px; }
    .ph-meta {
      display: flex; align-items: center; gap: 14px; flex-wrap: wrap;
      font-size: 12px; color: var(--text-neutral-medium);
    }
    .ph-meta a { color: var(--color-primary); text-decoration: none; }
    .mi { display: flex; align-items: center; gap: 4px; }
    .mi i { font-size: 10px; }
    .ph-progress { display: flex; align-items: center; gap: 14px; }
    .ph-bar { flex: 1; height: 5px; border-radius: 3px; background: #E7E5E4; overflow: hidden; }
    .ph-bar .fill { height: 100%; border-radius: 3px; }
    .ph-progress-label { font-size: 12px; font-weight: 600; color: var(--text-neutral-medium); white-space: nowrap; }

    /* ==============================
       Finding card
       ============================== */
    .finding-card {
      background: var(--surface-neutral-white);
      border: 1px solid var(--border-neutral-weak);
      border-radius: 14px; margin-bottom: 14px;
      overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.03);
    }
    .fc-main { padding: 20px 22px; border-left: 3px solid transparent; }
    .finding-card.done .fc-main { border-left-color: var(--color-done); }
    .finding-card.awaiting .fc-main { border-left-color: var(--color-awaiting); }
    .finding-card.working .fc-main { border-left-color: var(--color-working); }
    .finding-card.upcoming .fc-main { border-left-color: var(--color-queued); }

    .fc-header { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 12px; }
    .fc-icon {
      width: 28px; height: 28px; border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 12px; flex-shrink: 0; margin-top: 1px;
    }
    .fc-icon.done { background: var(--color-done-light); color: var(--color-done); }
    .fc-icon.awaiting { background: var(--color-awaiting-light); color: var(--color-awaiting); }
    .fc-icon.working { background: var(--color-working-light); color: var(--color-working); }
    .fc-icon.upcoming { background: var(--surface-neutral-x-weak); color: var(--text-neutral-weak); }
    .fc-title-block { flex: 1; }
    .fc-title { font-size: 14px; font-weight: 600; margin-bottom: 2px; }
    .fc-time { font-size: 11px; color: var(--text-neutral-weak); }

    /* Upcoming badge */
    .upcoming-badge {
      display: inline-flex; align-items: center; gap: 4px;
      font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
      color: var(--text-neutral-weak); padding: 2px 8px; border-radius: 4px;
      background: var(--surface-neutral-x-weak);
    }

    .fc-lead {
      font-size: 14px; line-height: 1.65; color: var(--text-neutral-strong);
      margin-bottom: 14px; padding-bottom: 14px;
      border-bottom: 1px solid var(--border-neutral-weak);
    }
    .fc-lead strong { color: var(--text-neutral-xx-strong); font-weight: 600; }

    .fc-secondaries { display: flex; flex-direction: column; gap: 8px; margin-bottom: 14px; }
    .fc-secondary { display: flex; align-items: flex-start; gap: 8px; font-size: 13px; line-height: 1.55; color: var(--text-neutral-strong); }
    .fc-sec-indicator { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; margin-top: 6px; }
    .fc-sec-indicator.high { background: var(--color-risk-high); }
    .fc-sec-indicator.med { background: var(--color-risk-med); }
    .fc-sec-indicator.low { background: var(--color-risk-low); }
    .fc-sec-indicator.info { background: var(--color-working); }
    .fc-sec-indicator.neutral { background: var(--text-neutral-weak); }
    .fc-sec-text { flex: 1; }
    .fc-sec-text strong { color: var(--text-neutral-xx-strong); font-weight: 600; }

    .fc-artifacts {
      display: flex; flex-wrap: wrap; gap: 8px;
      padding-top: 14px; border-top: 1px solid var(--border-neutral-weak);
    }
    .artifact-chip {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 7px 14px; border-radius: 8px;
      background: var(--surface-neutral-xx-weak); border: 1px solid var(--border-neutral-weak);
      font-size: 12px; font-weight: 500; color: var(--text-neutral-strong);
      cursor: pointer; transition: all 0.15s ease;
    }
    .artifact-chip:hover { background: var(--color-primary-light); border-color: var(--color-primary); color: var(--color-primary); }
    .artifact-chip.active { background: var(--color-primary-light); border-color: var(--color-primary); color: var(--color-primary); }
    .artifact-chip i { font-size: 11px; }
    .artifact-chip .chip-arrow { font-size: 9px; margin-left: 2px; opacity: 0; transition: opacity 0.15s ease; }
    .artifact-chip:hover .chip-arrow { opacity: 1; }

    /* Review gate footer */
    .fc-review {
      padding: 12px 22px; background: var(--surface-neutral-xx-weak);
      border-top: 1px solid var(--border-neutral-weak);
      display: flex; align-items: center; gap: 10px;
    }
    .fc-review.passed { background: #FAFFF8; }
    .fc-review.ready { background: #FFFBEB; }
    .fc-review.future { background: var(--surface-neutral-xx-weak); }
    .fc-review-icon {
      width: 22px; height: 22px; border-radius: 6px;
      display: flex; align-items: center; justify-content: center;
      font-size: 9px; flex-shrink: 0;
    }
    .fc-review-icon.passed { background: var(--color-done-light); color: var(--color-done); }
    .fc-review-icon.ready { background: var(--color-awaiting-light); color: var(--color-awaiting); }
    .fc-review-icon.future { background: var(--surface-neutral-x-weak); color: var(--text-neutral-weak); }
    .fc-review-info { flex: 1; }
    .fc-review-label { font-size: 12px; font-weight: 500; }
    .fc-review-sub { font-size: 11px; color: var(--text-neutral-weak); margin-top: 1px; }

    /* Upcoming card items */
    .upcoming-items { margin-top: 10px; display: flex; flex-direction: column; gap: 5px; }
    .ui-row { display: flex; align-items: center; gap: 8px; font-size: 12px; color: var(--text-neutral-medium); }
    .ui-dot {
      width: 14px; height: 14px; border-radius: 50%;
      border: 1.5px solid #D6D3D1; flex-shrink: 0;
    }

    /* Execution audit toggle */
    .fc-exec-toggle {
      display: flex; align-items: center; gap: 5px;
      font-size: 11px; color: var(--text-neutral-weak);
      cursor: pointer; border: none; background: none;
      padding: 8px 0 0; transition: color 0.15s ease;
    }
    .fc-exec-toggle:hover { color: var(--text-neutral-medium); }
    .fc-exec-toggle i { font-size: 8px; transition: transform 0.2s ease; }
    .fc-exec-toggle.open i { transform: rotate(90deg); }
    .fc-exec-detail {
      display: none; margin-top: 8px; padding: 8px 12px;
      background: var(--surface-neutral-xx-weak); border-radius: 8px;
      font-size: 11px; color: var(--text-neutral-medium);
    }
    .fc-exec-detail.open { display: block; }
    .fc-exec-step { display: flex; align-items: center; gap: 6px; padding: 3px 0; }
    .fc-exec-step .step-icon {
      width: 14px; height: 14px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 6px; flex-shrink: 0;
      background: var(--color-done-light); color: var(--color-done);
    }

    /* ==============================
       Parallel group
       ============================== */
    .parallel-label {
      display: flex; align-items: center; gap: 8px;
      margin-bottom: 10px; padding-left: 4px;
    }
    .parallel-label-text {
      font-size: 11px; color: var(--text-neutral-weak);
      display: flex; align-items: center; gap: 5px;
      white-space: nowrap;
    }
    .parallel-label-text i { font-size: 10px; }
    .parallel-label .line { flex: 1; height: 1px; background: var(--border-neutral-weak); }

    .parallel-group {
      display: flex; gap: 14px; margin-bottom: 14px;
    }
    .parallel-group > .finding-card { flex: 1; margin-bottom: 0; min-width: 0; }

    /* Standalone review gate between sections */
    .standalone-review {
      background: var(--surface-neutral-white);
      border: 1px solid var(--border-neutral-weak);
      border-radius: 10px; margin-bottom: 14px;
      padding: 12px 22px;
      display: flex; align-items: center; gap: 10px;
    }

    /* Completion banner */
    .completion-banner {
      display: flex; align-items: center; gap: 12px;
      padding: 14px 20px; border-radius: 12px;
      background: var(--color-done-light); margin-top: 8px;
    }
    .completion-dot {
      width: 28px; height: 28px; border-radius: 50%;
      background: var(--color-done); color: white;
      display: flex; align-items: center; justify-content: center; font-size: 12px;
    }

    /* Simulated artifact content */
    .mock-chart {
      background: var(--surface-neutral-xx-weak); border: 1px solid var(--border-neutral-weak);
      border-radius: 12px; padding: 20px; margin-bottom: 20px;
    }
    .chart-title { font-size: 13px; font-weight: 600; margin-bottom: 16px; }
    .chart-bar-group { margin-bottom: 12px; }
    .chart-bar-label { font-size: 11px; color: var(--text-neutral-medium); margin-bottom: 4px; display: flex; justify-content: space-between; }
    .chart-bar-track { height: 20px; background: #E7E5E4; border-radius: 4px; overflow: hidden; position: relative; }
    .chart-bar-fill { height: 100%; border-radius: 4px; }
    .chart-bar-marker { position: absolute; top: 0; bottom: 0; width: 2px; background: var(--text-neutral-xx-strong); }

    @keyframes pulse-amber { 0%, 100% { box-shadow: 0 0 0 0 rgba(217,119,6,0.2); } 50% { box-shadow: 0 0 0 8px rgba(217,119,6,0); } }
    @keyframes spin { to { transform: rotate(360deg); } }
    .spinner {
      display: inline-block; width: 10px; height: 10px;
      border: 2px solid var(--color-working-light);
      border-top-color: var(--color-working);
      border-radius: 50%; animation: spin 0.8s linear infinite;
    }
  </style>
</head>
<body>

<div class="top-nav">
  <div class="breadcrumb">
    <a href="#"><i class="fa-solid fa-house" style="font-size:12px;"></i></a>
    <span class="sep"><i class="fa-solid fa-chevron-right"></i></span>
    <a href="#">Activity</a>
    <span class="sep"><i class="fa-solid fa-chevron-right"></i></span>
    <span class="current">Backfill Plan for Tony Ramirez</span>
  </div>
</div>

<div class="state-toggle">
  <button class="toggle-btn active" onclick="showView('running')">Mid-Execution (Paused)</button>
  <button class="toggle-btn" onclick="showView('parallel')">Mid-Execution (Parallel)</button>
  <button class="toggle-btn" onclick="showView('completed')">Completed</button>
</div>
<div class="state-desc" id="state-desc">Plan paused at a review gate. Two upcoming sections visible with full detail.</div>


<!-- ============================================================
     VIEW 1: MID-EXECUTION — Paused at review gate
     ============================================================ -->
<div class="view active" id="view-running">
<div class="shell" id="shell-running">
<div class="findings-pane">

  <div class="plan-header">
    <div class="ph-top">
      <div class="ph-icon" style="background:var(--color-awaiting-light);color:var(--color-awaiting);"><i class="fa-solid fa-clipboard-list"></i></div>
      <div class="ph-info">
        <h1>Backfill Plan for Tony Ramirez</h1>
        <div class="ph-meta">
          <span class="badge badge-paused"><i class="fa-solid fa-hand"></i> Needs Review</span>
          <div class="mi"><i class="fa-regular fa-clock"></i> 12 min ago</div>
          <div class="mi"><a href="#"><i class="fa-regular fa-comment"></i> Open in chat</a></div>
        </div>
      </div>
    </div>
    <div class="ph-progress">
      <div class="ph-bar"><div class="fill" style="width:33%;background:var(--color-working);"></div></div>
      <div class="ph-progress-label">3 of 9 complete</div>
    </div>
  </div>

  <!-- Finding 1: Done -->
  <div class="finding-card done">
    <div class="fc-main">
      <div class="fc-header">
        <div class="fc-icon done"><i class="fa-solid fa-check"></i></div>
        <div class="fc-title-block">
          <div class="fc-title">Team Compensation & Retention Risk</div>
          <div class="fc-time">Completed 10:25 AM</div>
        </div>
      </div>
      <div class="fc-lead">
        <strong>Daniel Kim is significantly underpaid and a high flight risk.</strong>
        15% below midpoint ($118K vs $135K), no promotion in 2 years. Tony's departure creates an AWS cert gap and leaves 2 projects without a lead.
      </div>
      <div class="fc-secondaries">
        <div class="fc-secondary"><div class="fc-sec-indicator med"></div><div class="fc-sec-text"><strong>Rachel Green — MEDIUM risk.</strong> $105K, 8% below midpoint, top performer, no comp adjustment in 14 months.</div></div>
        <div class="fc-secondary"><div class="fc-sec-indicator low"></div><div class="fc-sec-text"><strong>James Liu — LOW risk.</strong> Recently promoted, comp at midpoint.</div></div>
        <div class="fc-secondary"><div class="fc-sec-indicator info"></div><div class="fc-sec-text"><strong>Team compa-ratio: 0.87</strong> — below target range across the board.</div></div>
      </div>
      <div class="fc-artifacts">
        <div class="artifact-chip" onclick="openPanel('running','comp')"><i class="fa-solid fa-chart-bar"></i> Compensation Analysis <i class="fa-solid fa-arrow-right chip-arrow"></i></div>
        <div class="artifact-chip" onclick="openPanel('running','org')"><i class="fa-solid fa-sitemap"></i> Org Impact Report <i class="fa-solid fa-arrow-right chip-arrow"></i></div>
      </div>
    </div>
    <div class="fc-review passed">
      <div class="fc-review-icon passed"><i class="fa-solid fa-check"></i></div>
      <div class="fc-review-info">
        <div class="fc-review-label">Reviewed by You</div>
        <div class="fc-review-sub">Approved to proceed with candidate assessment and external hiring — 10:27 AM</div>
      </div>
    </div>
  </div>

  <!-- Finding 2: Awaiting review -->
  <div class="finding-card awaiting" style="animation: pulse-amber 3s ease-in-out infinite;">
    <div class="fc-main">
      <div class="fc-header">
        <div class="fc-icon awaiting"><i class="fa-solid fa-hand"></i></div>
        <div class="fc-title-block">
          <div class="fc-title">Internal Candidate Assessment</div>
          <div class="fc-time">Analysis complete — waiting for review</div>
        </div>
      </div>
      <div class="fc-lead">
        <strong>Daniel Kim scores 82/100 on promotion readiness — ready for Senior SE.</strong>
        Strong technical skills, exceeds expectations. Primary gap: mentorship experience. Development plan drafted.
      </div>
      <div class="fc-secondaries">
        <div class="fc-secondary"><div class="fc-sec-indicator med"></div><div class="fc-sec-text"><strong>Rachel Green: 71/100</strong> — needs 6–12 months. Worth tracking for next cycle.</div></div>
        <div class="fc-secondary"><div class="fc-sec-indicator info"></div><div class="fc-sec-text"><strong>Promoting Daniel creates a secondary backfill</strong> at mid-level SE — lower risk, 3 talent pool candidates available.</div></div>
      </div>
      <div class="fc-artifacts">
        <div class="artifact-chip" onclick="openPanel('running','devplan')"><i class="fa-solid fa-file-lines"></i> Daniel Kim — Development Plan <i class="fa-solid fa-arrow-right chip-arrow"></i></div>
      </div>
    </div>
    <div class="fc-review ready">
      <div class="fc-review-icon ready"><i class="fa-solid fa-hand"></i></div>
      <div class="fc-review-info">
        <div class="fc-review-label" style="color:var(--color-awaiting);">Waiting for Uma Patel</div>
        <div class="fc-review-sub">Confirm internal candidate direction before proceeding</div>
      </div>
      <div><button class="btn btn-amber btn-sm"><i class="fa-solid fa-eye"></i> Review</button></div>
    </div>
  </div>

  <!-- Upcoming 1 -->
  <div class="finding-card upcoming">
    <div class="fc-main" style="padding:16px 22px;">
      <div class="fc-header" style="margin-bottom:4px;">
        <div class="fc-icon upcoming"><i class="fa-solid fa-arrow-right" style="font-size:11px;"></i></div>
        <div class="fc-title-block">
          <div class="fc-title" style="color:var(--text-neutral-medium);display:flex;align-items:center;gap:8px;">
            External Hiring Pipeline
            <span class="upcoming-badge">Upcoming</span>
          </div>
          <div class="fc-time">Starts after review gate · 3 items</div>
        </div>
      </div>
      <div class="upcoming-items">
        <div class="ui-row"><div class="ui-dot"></div><div>Create job posting for Senior Software Engineer ($125K–$155K)</div></div>
        <div class="ui-row"><div class="ui-dot"></div><div>Screen talent pool candidates against role requirements</div></div>
        <div class="ui-row"><div class="ui-dot"></div><div>Draft personalized outreach for top-ranked candidates</div></div>
      </div>
    </div>
    <div class="fc-review future">
      <div class="fc-review-icon future"><i class="fa-solid fa-eye"></i></div>
      <div class="fc-review-info">
        <div class="fc-review-label" style="color:var(--text-neutral-weak);">You approve job posting and outreach before publishing</div>
      </div>
    </div>
  </div>

  <!-- Upcoming 2 -->
  <div class="finding-card upcoming">
    <div class="fc-main" style="padding:16px 22px;">
      <div class="fc-header" style="margin-bottom:4px;">
        <div class="fc-icon upcoming"><i class="fa-solid fa-arrow-right" style="font-size:11px;"></i></div>
        <div class="fc-title-block">
          <div class="fc-title" style="color:var(--text-neutral-medium);display:flex;align-items:center;gap:8px;">
            Retention & Compensation Adjustments
            <span class="upcoming-badge">Upcoming</span>
          </div>
          <div class="fc-time">Final section · 2 items</div>
        </div>
      </div>
      <div class="upcoming-items">
        <div class="ui-row"><div class="ui-dot"></div><div>Propose compensation adjustment for Daniel Kim (promotion to Senior SE)</div></div>
        <div class="ui-row"><div class="ui-dot"></div><div>Propose retention adjustment for Rachel Green</div></div>
      </div>
    </div>
    <div class="fc-review future">
      <div class="fc-review-icon future"><i class="fa-solid fa-eye"></i></div>
      <div class="fc-review-info">
        <div class="fc-review-label" style="color:var(--text-neutral-weak);">Finance (VP) approves compensation changes</div>
      </div>
    </div>
  </div>

</div>

<!-- Artifact panel (reused across views) -->
<div class="artifact-panel" id="panel-running">
  <div id="panel-running-comp" style="display:flex;flex-direction:column;height:100%;">
    <div class="ap-header">
      <div class="ap-header-icon chart"><i class="fa-solid fa-chart-bar"></i></div>
      <div class="ap-header-info"><div class="ap-header-title">Compensation Analysis</div><div class="ap-header-meta">Generated 10:23 AM · Technology Department</div></div>
      <button class="ap-close" onclick="closePanel('running')"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="ap-body">
      <div class="mock-chart">
        <div class="chart-title">Pay Band Position — Uma Patel's Team</div>
        <div class="chart-bar-group">
          <div class="chart-bar-label"><span>Daniel Kim</span><span style="color:var(--color-risk-high);font-weight:600;">$118K</span></div>
          <div class="chart-bar-track"><div class="chart-bar-fill" style="width:62%;background:var(--color-risk-high);opacity:0.7;"></div><div class="chart-bar-marker" style="left:71%;"></div></div>
        </div>
        <div class="chart-bar-group">
          <div class="chart-bar-label"><span>Rachel Green</span><span style="color:var(--color-risk-med);font-weight:600;">$105K</span></div>
          <div class="chart-bar-track"><div class="chart-bar-fill" style="width:55%;background:var(--color-risk-med);opacity:0.7;"></div><div class="chart-bar-marker" style="left:60%;"></div></div>
        </div>
        <div class="chart-bar-group">
          <div class="chart-bar-label"><span>James Liu</span><span style="color:var(--color-risk-low);font-weight:600;">$128K</span></div>
          <div class="chart-bar-track"><div class="chart-bar-fill" style="width:67%;background:var(--color-risk-low);opacity:0.7;"></div><div class="chart-bar-marker" style="left:67%;"></div></div>
        </div>
      </div>
    </div>
    <div class="ap-actions">
      <button class="btn btn-outline btn-sm" style="flex:1;justify-content:center;"><i class="fa-solid fa-arrow-up-right-from-square"></i> Open full view</button>
      <button class="btn btn-outline btn-sm" style="flex:1;justify-content:center;"><i class="fa-solid fa-download"></i> Export</button>
    </div>
  </div>
  <div id="panel-running-org" style="display:none;flex-direction:column;height:100%;">
    <div class="ap-header">
      <div class="ap-header-icon report"><i class="fa-solid fa-sitemap"></i></div>
      <div class="ap-header-info"><div class="ap-header-title">Org Impact Report</div><div class="ap-header-meta">Generated 10:25 AM</div></div>
      <button class="ap-close" onclick="closePanel('running')"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="ap-body">
      <div style="font-size:13px;line-height:1.7;color:var(--text-neutral-strong);">
        <p style="margin-bottom:12px;"><strong>Span of control:</strong> Uma Patel drops from 8→7 direct reports.</p>
        <p style="margin-bottom:12px;"><strong>Projects affected:</strong> API Gateway v2 (65% complete, Tony is sole reviewer) and Mobile SDK (30%, Tony owns architecture).</p>
        <p><strong>Knowledge gaps:</strong> AWS Infrastructure (critical), API Architecture, CI/CD Pipeline.</p>
      </div>
    </div>
    <div class="ap-actions">
      <button class="btn btn-outline btn-sm" style="flex:1;justify-content:center;"><i class="fa-solid fa-arrow-up-right-from-square"></i> Open full view</button>
    </div>
  </div>
  <div id="panel-running-devplan" style="display:none;flex-direction:column;height:100%;">
    <div class="ap-header">
      <div class="ap-header-icon text"><i class="fa-solid fa-file-lines"></i></div>
      <div class="ap-header-info"><div class="ap-header-title">Daniel Kim — Development Plan</div><div class="ap-header-meta">Generated 10:29 AM · Senior SE Track</div></div>
      <button class="ap-close" onclick="closePanel('running')"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="ap-body">
      <div style="margin-bottom:16px;"><div style="font-size:13px;font-weight:600;margin-bottom:4px;">Readiness: 82/100</div>
        <div style="height:8px;background:#E7E5E4;border-radius:4px;overflow:hidden;"><div style="width:82%;height:100%;background:var(--color-done);border-radius:4px;"></div></div>
      </div>
      <div style="font-size:13px;font-weight:600;margin-bottom:8px;">90-Day Milestones</div>
      <div style="display:flex;flex-direction:column;gap:8px;">
        <div style="padding:10px 14px;background:var(--surface-neutral-xx-weak);border-radius:8px;font-size:12px;line-height:1.5;"><strong>Month 1:</strong> Take over API Gateway lead. Shadow Uma on architecture reviews.</div>
        <div style="padding:10px 14px;background:var(--surface-neutral-xx-weak);border-radius:8px;font-size:12px;line-height:1.5;"><strong>Month 2:</strong> Mentor junior engineer. Begin AWS cert prep.</div>
        <div style="padding:10px 14px;background:var(--surface-neutral-xx-weak);border-radius:8px;font-size:12px;line-height:1.5;"><strong>Month 3:</strong> Lead cross-team review. Complete AWS Solutions Architect.</div>
      </div>
    </div>
    <div class="ap-actions">
      <button class="btn btn-outline btn-sm" style="flex:1;justify-content:center;"><i class="fa-solid fa-arrow-up-right-from-square"></i> Open full view</button>
      <button class="btn btn-outline btn-sm" style="flex:1;justify-content:center;"><i class="fa-solid fa-pen"></i> Edit</button>
    </div>
  </div>
</div>

</div>
</div>


<!-- ============================================================
     VIEW 2: MID-EXECUTION — Parallel branches actively running
     ============================================================ -->
<div class="view" id="view-parallel">
<div class="page">

  <div class="plan-header">
    <div class="ph-top">
      <div class="ph-icon" style="background:var(--color-working-light);color:var(--color-working);"><i class="fa-solid fa-clipboard-list"></i></div>
      <div class="ph-info">
        <h1>Backfill Plan for Tony Ramirez</h1>
        <div class="ph-meta">
          <span class="badge badge-paused" style="background:var(--color-working-light);color:var(--color-working);"><span class="spinner" style="width:8px;height:8px;border-width:1.5px;"></span> Running</span>
          <div class="mi"><i class="fa-regular fa-clock"></i> 18 min ago</div>
          <div class="mi"><a href="#"><i class="fa-regular fa-comment"></i> Open in chat</a></div>
        </div>
      </div>
    </div>
    <div class="ph-progress">
      <div class="ph-bar"><div class="fill" style="width:56%;background:var(--color-working);"></div></div>
      <div class="ph-progress-label">5 of 9 complete</div>
    </div>
  </div>

  <!-- Finding 1: Done -->
  <div class="finding-card done">
    <div class="fc-main">
      <div class="fc-header">
        <div class="fc-icon done"><i class="fa-solid fa-check"></i></div>
        <div class="fc-title-block">
          <div class="fc-title">Team Compensation & Retention Risk</div>
          <div class="fc-time">Completed 10:25 AM</div>
        </div>
      </div>
      <div class="fc-lead">
        <strong>Daniel Kim is significantly underpaid and a high flight risk.</strong>
        15% below midpoint, no promotion in 2 years. Tony's departure creates AWS cert gap and 2 projects without a lead.
      </div>
      <div class="fc-secondaries">
        <div class="fc-secondary"><div class="fc-sec-indicator med"></div><div class="fc-sec-text"><strong>Rachel Green — MEDIUM risk.</strong> $105K, 8% below midpoint, top performer.</div></div>
        <div class="fc-secondary"><div class="fc-sec-indicator low"></div><div class="fc-sec-text"><strong>James Liu — LOW risk.</strong> Recently promoted, at midpoint.</div></div>
        <div class="fc-secondary"><div class="fc-sec-indicator info"></div><div class="fc-sec-text"><strong>Team compa-ratio: 0.87</strong> — below target range.</div></div>
      </div>
      <div class="fc-artifacts">
        <div class="artifact-chip"><i class="fa-solid fa-chart-bar"></i> Compensation Analysis</div>
        <div class="artifact-chip"><i class="fa-solid fa-sitemap"></i> Org Impact Report</div>
      </div>
    </div>
    <div class="fc-review passed">
      <div class="fc-review-icon passed"><i class="fa-solid fa-check"></i></div>
      <div class="fc-review-info">
        <div class="fc-review-label">Reviewed by You</div>
        <div class="fc-review-sub">Approved to proceed — 10:27 AM</div>
      </div>
    </div>
  </div>

  <!-- PARALLEL: Two findings running simultaneously -->
  <div class="parallel-label">
    <div class="parallel-label-text"><i class="fa-solid fa-code-branch"></i> Running in parallel after Review Gate 1</div>
    <div class="line"></div>
  </div>

  <div class="parallel-group">
    <!-- Left: Internal candidates — done -->
    <div class="finding-card done">
      <div class="fc-main">
        <div class="fc-header">
          <div class="fc-icon done"><i class="fa-solid fa-check"></i></div>
          <div class="fc-title-block">
            <div class="fc-title">Internal Candidates</div>
            <div class="fc-time">Completed 10:30 AM</div>
          </div>
        </div>
        <div class="fc-lead">
          <strong>Daniel Kim: 82/100 — ready for Senior SE.</strong>
          Exceeds expectations, strong technical. Gap: mentorship.
        </div>
        <div class="fc-secondaries">
          <div class="fc-secondary"><div class="fc-sec-indicator med"></div><div class="fc-sec-text"><strong>Rachel Green: 71/100</strong> — 6–12 months out.</div></div>
        </div>
        <div class="fc-artifacts">
          <div class="artifact-chip"><i class="fa-solid fa-file-lines"></i> Development Plan</div>
        </div>
      </div>
    </div>

    <!-- Right: External pipeline — still working -->
    <div class="finding-card working">
      <div class="fc-main">
        <div class="fc-header">
          <div class="fc-icon working"><span class="spinner"></span></div>
          <div class="fc-title-block">
            <div class="fc-title">External Hiring Pipeline</div>
            <div class="fc-time">2 of 3 complete — screening candidates...</div>
          </div>
        </div>
        <div class="fc-lead" style="border-bottom:none;margin-bottom:0;padding-bottom:0;">
          <strong>Job posting created.</strong> Senior Software Engineer, $125K–$155K, remote-eligible. Now screening talent pool...
        </div>
        <div class="fc-artifacts" style="margin-top:10px;">
          <div class="artifact-chip"><i class="fa-solid fa-briefcase"></i> Job Posting — Senior SE</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Shared review gate for both parallel branches -->
  <div class="standalone-review" style="border-style:dashed;border-color:var(--text-neutral-weak);">
    <div class="fc-review-icon future"><i class="fa-solid fa-eye"></i></div>
    <div class="fc-review-info">
      <div class="fc-review-label" style="color:var(--text-neutral-weak);">Uma Patel confirms internal candidate + You approve posting</div>
      <div class="fc-review-sub">Both parallel branches must complete before this gate</div>
    </div>
  </div>

  <!-- Upcoming -->
  <div class="finding-card upcoming">
    <div class="fc-main" style="padding:16px 22px;">
      <div class="fc-header" style="margin-bottom:4px;">
        <div class="fc-icon upcoming"><i class="fa-solid fa-arrow-right" style="font-size:11px;"></i></div>
        <div class="fc-title-block">
          <div class="fc-title" style="color:var(--text-neutral-medium);display:flex;align-items:center;gap:8px;">
            Retention & Compensation Adjustments
            <span class="upcoming-badge">Upcoming</span>
          </div>
          <div class="fc-time">Final section · 2 items</div>
        </div>
      </div>
      <div class="upcoming-items">
        <div class="ui-row"><div class="ui-dot"></div><div>Propose compensation adjustment for Daniel Kim (promotion)</div></div>
        <div class="ui-row"><div class="ui-dot"></div><div>Propose retention adjustment for Rachel Green</div></div>
      </div>
    </div>
    <div class="fc-review future">
      <div class="fc-review-icon future"><i class="fa-solid fa-eye"></i></div>
      <div class="fc-review-info"><div class="fc-review-label" style="color:var(--text-neutral-weak);">Finance (VP) approves compensation changes</div></div>
    </div>
  </div>

</div>
</div>


<!-- ============================================================
     VIEW 3: COMPLETED — all done, parallel visible in history
     ============================================================ -->
<div class="view" id="view-completed">
<div class="page">

  <div class="plan-header">
    <div class="ph-top">
      <div class="ph-icon" style="background:var(--color-done-light);color:var(--color-done);"><i class="fa-solid fa-clipboard-check"></i></div>
      <div class="ph-info">
        <h1>Backfill Plan for Tony Ramirez</h1>
        <div class="ph-meta">
          <span class="badge badge-completed"><i class="fa-solid fa-check"></i> Completed</span>
          <div class="mi"><i class="fa-regular fa-clock"></i> 47 min</div>
          <div class="mi"><i class="fa-regular fa-calendar"></i> Jan 15, 2026</div>
          <div class="mi"><a href="#"><i class="fa-regular fa-comment"></i> View conversation</a></div>
        </div>
      </div>
    </div>
    <div class="ph-progress">
      <div class="ph-bar"><div class="fill" style="width:100%;background:var(--color-done);"></div></div>
      <div class="ph-progress-label">9 of 9 · 3 reviews · 5 artifacts</div>
    </div>
  </div>

  <!-- Finding 1 -->
  <div class="finding-card done">
    <div class="fc-main">
      <div class="fc-header">
        <div class="fc-icon done"><i class="fa-solid fa-check"></i></div>
        <div class="fc-title-block">
          <div class="fc-title">Team Compensation & Retention Risk</div>
          <div class="fc-time">10:23–10:25 AM</div>
        </div>
      </div>
      <div class="fc-lead"><strong>Daniel Kim is significantly underpaid and a high flight risk.</strong> 15% below midpoint, no promotion in 2 years. AWS cert gap and 2 projects without a lead.</div>
      <div class="fc-secondaries">
        <div class="fc-secondary"><div class="fc-sec-indicator med"></div><div class="fc-sec-text"><strong>Rachel Green — MEDIUM risk.</strong> $105K, 8% below midpoint.</div></div>
        <div class="fc-secondary"><div class="fc-sec-indicator low"></div><div class="fc-sec-text"><strong>James Liu — LOW risk.</strong> At midpoint, recently promoted.</div></div>
        <div class="fc-secondary"><div class="fc-sec-indicator info"></div><div class="fc-sec-text"><strong>Team compa-ratio: 0.87.</strong></div></div>
      </div>
      <div class="fc-artifacts">
        <div class="artifact-chip"><i class="fa-solid fa-chart-bar"></i> Compensation Analysis</div>
        <div class="artifact-chip"><i class="fa-solid fa-sitemap"></i> Org Impact Report</div>
      </div>
    </div>
    <div class="fc-review passed">
      <div class="fc-review-icon passed"><i class="fa-solid fa-check"></i></div>
      <div class="fc-review-info"><div class="fc-review-label">Reviewed by You</div><div class="fc-review-sub">Approved to proceed — 10:27 AM</div></div>
    </div>
  </div>

  <!-- Parallel findings -->
  <div class="parallel-label">
    <div class="parallel-label-text"><i class="fa-solid fa-code-branch"></i> Ran in parallel</div>
    <div class="line"></div>
  </div>
  <div class="parallel-group">
    <div class="finding-card done">
      <div class="fc-main">
        <div class="fc-header">
          <div class="fc-icon done"><i class="fa-solid fa-check"></i></div>
          <div class="fc-title-block"><div class="fc-title">Internal Candidates</div><div class="fc-time">10:28–10:30 AM</div></div>
        </div>
        <div class="fc-lead"><strong>Daniel Kim: 82/100 — ready for Senior SE.</strong> Gap: mentorship. Development plan drafted.</div>
        <div class="fc-secondaries">
          <div class="fc-secondary"><div class="fc-sec-indicator med"></div><div class="fc-sec-text"><strong>Rachel Green: 71/100</strong> — 6–12 months out.</div></div>
          <div class="fc-secondary"><div class="fc-sec-indicator info"></div><div class="fc-sec-text"><strong>Secondary backfill</strong> at mid-level — 3 candidates available.</div></div>
        </div>
        <div class="fc-artifacts">
          <div class="artifact-chip"><i class="fa-solid fa-file-lines"></i> Development Plan</div>
        </div>
      </div>
    </div>
    <div class="finding-card done">
      <div class="fc-main">
        <div class="fc-header">
          <div class="fc-icon done"><i class="fa-solid fa-check"></i></div>
          <div class="fc-title-block"><div class="fc-title">External Hiring Pipeline</div><div class="fc-time">10:28–10:33 AM</div></div>
        </div>
        <div class="fc-lead"><strong>3 strong candidates identified.</strong> Sarah Chen (94/100), Marcus Johnson (88), Alex Rivera (85).</div>
        <div class="fc-secondaries">
          <div class="fc-secondary"><div class="fc-sec-indicator low"></div><div class="fc-sec-text"><strong>Sarah Chen</strong> — 8 yrs, AWS certified, best match.</div></div>
          <div class="fc-secondary"><div class="fc-sec-indicator neutral"></div><div class="fc-sec-text">2 candidates below 80 threshold — not recommended.</div></div>
        </div>
        <div class="fc-artifacts">
          <div class="artifact-chip"><i class="fa-solid fa-briefcase"></i> Job Posting</div>
          <div class="artifact-chip"><i class="fa-solid fa-envelope"></i> Outreach (3)</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Shared review gate -->
  <div class="standalone-review">
    <div class="fc-review-icon passed"><i class="fa-solid fa-check"></i></div>
    <div class="fc-review-info">
      <div class="fc-review-label">Reviewed by Uma Patel & You</div>
      <div class="fc-review-sub">Uma confirmed Daniel Kim promotion. You approved posting and outreach. — 10:38 AM</div>
    </div>
  </div>

  <!-- Finding 4: Comp adjustments -->
  <div class="finding-card done">
    <div class="fc-main">
      <div class="fc-header">
        <div class="fc-icon done"><i class="fa-solid fa-check"></i></div>
        <div class="fc-title-block">
          <div class="fc-title">Retention & Compensation Adjustments</div>
          <div class="fc-time">10:39–10:44 AM</div>
        </div>
      </div>
      <div class="fc-lead"><strong>Two compensation proposals drafted.</strong> Daniel Kim: $118K→$138K (+17%) on promotion. Rachel Green: $105K→$114K (+8.6%) retention adjustment to midpoint.</div>
      <div class="fc-secondaries">
        <div class="fc-secondary"><div class="fc-sec-indicator low"></div><div class="fc-sec-text"><strong>Combined budget impact: $29K/yr.</strong> Within department compensation adjustment budget ($45K remaining).</div></div>
        <div class="fc-secondary"><div class="fc-sec-indicator info"></div><div class="fc-sec-text"><strong>Team compa-ratio would improve to 0.96</strong> — within target range (0.95–1.05) for the first time in 8 months.</div></div>
      </div>
    </div>
    <div class="fc-review passed">
      <div class="fc-review-icon passed"><i class="fa-solid fa-check"></i></div>
      <div class="fc-review-info">
        <div class="fc-review-label">Reviewed by Sarah Mitchell (Finance VP)</div>
        <div class="fc-review-sub">Both adjustments approved. Effective next pay period. — 10:52 AM</div>
      </div>
    </div>
  </div>

  <div class="completion-banner">
    <div class="completion-dot"><i class="fa-solid fa-check"></i></div>
    <div>
      <div style="font-size:13px;font-weight:600;color:var(--color-done);">Plan completed</div>
      <div style="font-size:12px;color:var(--text-neutral-strong);">3 review gates passed · 5 artifacts created · 47 min total</div>
    </div>
  </div>

</div>
</div>


<script>
  const descs = {
    running: 'Plan paused at a review gate. Two upcoming sections show full item lists, review gates, and reviewers.',
    parallel: 'Two branches running simultaneously after Review Gate 1. One is done, one is still working. Shared review gate waits for both.',
    completed: 'All sections complete. Parallel branches shown side-by-side in history. Three review gates with reviewer attribution.'
  };

  function showView(id) {
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('view-' + id).classList.add('active');
    document.getElementById('state-desc').textContent = descs[id];
    event.target.classList.add('active');
    // Close any open panels
    document.querySelectorAll('.shell').forEach(s => s.classList.remove('panel-open'));
  }

  function openPanel(view, type) {
    const shell = document.getElementById('shell-' + view);
    const panel = document.getElementById('panel-' + view);
    panel.querySelectorAll(':scope > div').forEach(d => d.style.display = 'none');
    document.getElementById('panel-' + view + '-' + type).style.display = 'flex';
    // Deactivate all chips in this view, activate clicked
    shell.querySelectorAll('.artifact-chip').forEach(c => c.classList.remove('active'));
    event.target.closest('.artifact-chip').classList.add('active');
    shell.classList.add('panel-open');
  }

  function closePanel(view) {
    document.getElementById('shell-' + view).classList.remove('panel-open');
    document.getElementById('shell-' + view).querySelectorAll('.artifact-chip').forEach(c => c.classList.remove('active'));
  }

  function toggleExec(btn) {
    btn.classList.toggle('open');
    btn.nextElementSibling.classList.toggle('open');
  }
</script>

</body>
</html>
